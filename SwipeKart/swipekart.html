<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SwipeKart - Mobile Phones</title>
    {/* CDNs for Tailwind, React, ReactDOM, Babel */}
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@17/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        /* Styles for scrollbar, range input, cart drawer (as before) */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #E31C5F; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #c71a54; }
        input[type=range] { -webkit-appearance: none; appearance: none; width: 100%; height: 8px; background: #ddd; outline: none; opacity: 0.7; transition: opacity .2s; border-radius: 4px; }
        input[type=range]:hover { opacity: 1; }
        input[type=range]::-webkit-slider-thumb { -webkit-appearance: none; appearance: none; width: 16px; height: 16px; background: #E31C5F; cursor: pointer; border-radius: 50%; }
        input[type=range]::-moz-range-thumb { width: 16px; height: 16px; background: #E31C5F; cursor: pointer; border-radius: 50%; border: none; }
        .cart-drawer { position: fixed; top: 0; right: -100%; width: 100%; max-width: 400px; height: 100%; background-color: white; box-shadow: -2px 0 8px rgba(0,0,0,0.1); z-index: 60; transition: right 0.4s cubic-bezier(0.25, 0.8, 0.25, 1); display: flex; flex-direction: column; }
        .cart-drawer.open { right: 0; }
        .cart-drawer-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background-color: rgba(0, 0, 0, 0.4); z-index: 59; opacity: 0; visibility: hidden; transition: opacity 0.4s ease-in-out, visibility 0.4s ease-in-out; }
        .cart-drawer-overlay.open { opacity: 1; visibility: visible; }
        .fade-in { animation: fadeIn 0.5s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .tab-active { border-color: #E31C5F; color: #E31C5F; font-weight: 600; }
        .tab-inactive { border-color: transparent; color: #6b7280; }
    </style>

    {/* Tailwind Config (as before) */}
    <script>
        tailwind.config = { theme: { extend: { colors: { primary: '#E31C5F', secondary: '#F5F5F5', dark: '#1F2937' }, fontFamily: { sans: ['Inter', 'sans-serif'] }, transitionTimingFunction: { 'cubic-cart': 'cubic-bezier(0.25, 0.8, 0.25, 1)' } } } }
    </script>
    {/* Inter Font (as before) */}
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
</head>
<body class="bg-secondary font-sans antialiased text-dark">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo, useCallback } = React;

        // --- Mock Data with LOCAL Image Paths ---
        const mockPhones = [
            // Use "images/ID.jpg" format. Assuming all images are .jpg for consistency.
            // Adjust extensions (.png, .webp, etc.) if your files differ.
            { id: 2, name: "Galaxy S24 Ultra", brand: "Samsung", price: 1299, rating: 4.8, storageOptions: ["256GB", "512GB", "1TB"], imageUrl: "images/2.jpg", multipleImages: ["images/2.jpg", "images/2.jpg", "images/2.jpg"], colors: ["Titanium Gray", "Titanium Black"], description: "Ultimate Galaxy AI experience.", highlights: ["Galaxy AI", "200MP Camera", "S Pen"], seller: "Samsung Official", specifications: { Display: "6.8\" AMOLED 2X", Processor: "Snapdragon 8 Gen 3", RAM: "12GB" }, detailedRating: { average: 4.8, count: 1250, stars: { 5: 1000, 4: 150, 3: 50, 2: 20, 1: 30 } }, reviews: [{ id: 'r1', user: "TechGuru", rating: 5, comment: "Phenomenal!", date: "2024-03-10" }], discount: 0.05, isNew: true, popularity: 95, relevantProductIds: [2, 3, 4] },
            { id: 4, name: "Galaxy Z Fold 5", brand: "Samsung", price: 1799, rating: 4.6, storageOptions: ["256GB", "512GB"], imageUrl: "images/4.jpg", multipleImages: ["images/4.jpg"], colors: ["Icy Blue", "Phantom Black"], description: "Unfold productivity.", highlights: ["Foldable screen", "Multitasking"], seller: "Best Buy", specifications: { Display: "7.6\" Foldable AMOLED", Processor: "Snapdragon 8 Gen 2", RAM: "12GB" }, detailedRating: { average: 4.6, count: 500, stars: {5: 350, 4:100, 3:30, 2:10, 1:10}}, reviews:[], discount: 0, isNew: false, popularity: 85, relevantProductIds: [1] },
            { id: 9, name: "Galaxy A54", brand: "Samsung", price: 449, rating: 4.3, storageOptions: ["128GB", "256GB"], imageUrl: "images/9.jpg", multipleImages: ["images/9.jpg"], colors: ["Lime", "Graphite"], description: "Solid mid-range.", highlights: ["Vibrant display", "Good battery"], seller: "Samsung Official", specifications: { Display: "6.4\" Super AMOLED", Processor: "Exynos 1380", RAM: "8GB" }, detailedRating: { average: 4.3, count: 1100, stars: {5: 600, 4:300, 3:100, 2:50, 1:50}}, reviews:[], discount: 0.1, isNew: false, popularity: 82, relevantProductIds: [6, 10] },
            { id: 1, name: "iPhone 15 Pro", brand: "Apple", price: 999, rating: 4.9, storageOptions: ["128GB", "256GB", "1TB"], imageUrl: "images/1.jpg", multipleImages: ["images/1.jpg", "images/1.jpg"], colors: ["Natural Titanium", "Blue Titanium"], description: "Titanium design, A17 Pro.", highlights: ["A17 Pro", "Pro Camera", "Action Button"], seller: "Apple Store", specifications: { Display: "6.1\" Super Retina XDR", Processor: "A17 Pro", RAM: "8GB" }, detailedRating: { average: 4.9, count: 2100, stars: { 5: 1950, 4: 100, 3: 30, 2: 10, 1: 10 } }, reviews: [{ id: 'r4', user: "iOSFan", rating: 5, comment: "Best iPhone yet.", date: "2024-03-12" }], discount: 0, isNew: true, popularity: 98, relevantProductIds: [1, 5, 8] },
            { id: 5, name: "iPhone 15", brand: "Apple", price: 799, rating: 4.7, storageOptions: ["128GB", "256GB"], imageUrl: "images/5.jpg", multipleImages: ["images/5.jpg"], colors: ["Black", "Blue", "Pink"], description: "Dynamic Island, 48MP Camera.", highlights: ["Dynamic Island", "48MP Camera"], seller: "Apple Store", specifications: { Display: "6.1\" Super Retina XDR", Processor: "A16 Bionic", RAM: "6GB" }, detailedRating: { average: 4.7, count: 1500, stars: {5: 1200, 4:200, 3:50, 2:25, 1:25}}, reviews:[], discount: 0, isNew: true, popularity: 92, relevantProductIds: [2, 6] },
            { id: 3, name: "Pixel 8 Pro", brand: "Google", price: 999, rating: 4.7, storageOptions: ["128GB", "512GB"], imageUrl: "images/3.jpg", multipleImages: ["images/3.jpg", "images/3.jpg"], colors: ["Obsidian", "Porcelain", "Bay"], description: "Google AI power.", highlights: ["Tensor G3", "AI Camera Features", "7 Years Updates"], seller: "Google Store", specifications: { Display: "6.7\" LTPO OLED", Processor: "Google Tensor G3", RAM: "12GB" }, detailedRating: { average: 4.7, count: 980, stars: { 5: 750, 4: 150, 3: 50, 2: 15, 1: 15 } }, reviews: [{ id: 'r6', user: "AndroidDev", rating: 5, comment: "Pure Android, great AI.", date: "2024-03-05" }], discount: 0.1, isNew: true, popularity: 90, relevantProductIds: [1, 6, 7] },
            { id: 6, name: "Pixel 7a", brand: "Google", price: 499, rating: 4.5, storageOptions: ["128GB"], imageUrl: "images/6.jpg", multipleImages: ["images/6.jpg"], colors: ["Charcoal", "Sea"], description: "Affordable Pixel experience.", highlights: ["Pixel Camera", "Tensor G2"], seller: "Google Store", specifications: { Display: "6.1\" OLED", Processor: "Google Tensor G2", RAM: "8GB" }, detailedRating: { average: 4.5, count: 800, stars: {5: 500, 4:200, 3:50, 2:25, 1:25}}, reviews:[], discount: 0.15, isNew: false, popularity: 88, relevantProductIds: [3, 5, 9] },
            { id: 7, name: "OnePlus 12", brand: "OnePlus", price: 799, rating: 4.6, storageOptions: ["256GB", "512GB"], imageUrl: "images/7.jpg", multipleImages: ["images/7.jpg"], colors: ["Silky Black", "Flowy Emerald"], description: "Flagship performance, fast charging.", highlights: ["Snapdragon 8 Gen 3", "Hasselblad Camera", "Fast Charging"], seller: "OnePlus Official", specifications: { Display: "6.82\" LTPO AMOLED", Processor: "Snapdragon 8 Gen 3", RAM: "16GB" }, detailedRating: { average: 4.6, count: 650, stars: {5: 450, 4:150, 3:30, 2:10, 1:10}}, reviews:[], discount: 0.08, isNew: true, popularity: 89, relevantProductIds: [1, 3, 8] },
            { id: 8, name: "Xiaomi 14", brand: "Xiaomi", price: 849, rating: 4.5, storageOptions: ["256GB", "512GB"], imageUrl: "images/8.jpg", multipleImages: ["images/8.jpg"], colors: ["Black", "Jade Green"], description: "Compact flagship, Leica optics.", highlights: ["Leica Optics", "Snapdragon 8 Gen 3", "Compact"], seller: "Xiaomi Global", specifications: { Display: "6.36\" LTPO OLED", Processor: "Snapdragon 8 Gen 3", RAM: "12GB" }, detailedRating: { average: 4.5, count: 400, stars: {5: 280, 4:80, 3:20, 2:10, 1:10}}, reviews:[], discount: 0, isNew: true, popularity: 86, relevantProductIds: [1, 2, 7] },
            { id: 10, name: "Nothing Phone (2)", brand: "Nothing", price: 599, rating: 4.4, storageOptions: ["128GB", "256GB"], imageUrl: "images/10.jpg", multipleImages: ["images/10.jpg"], colors: ["White", "Dark Gray"], description: "Unique Glyph interface.", highlights: ["Glyph Interface", "Nothing OS"], seller: "Nothing Tech", specifications: { Display: "6.7\" LTPO OLED", Processor: "Snapdragon 8+ Gen 1", RAM: "12GB" }, detailedRating: { average: 4.4, count: 720, stars: {5: 450, 4:180, 3:50, 2:20, 1:20}}, reviews:[], discount: 0, isNew: false, popularity: 80, relevantProductIds: [6, 8, 9] },
            { id: 11, name: "Vivo X100 Pro", brand: "Vivo", price: 1099, rating: 4.7, storageOptions: ["256GB", "512GB"], imageUrl: "images/11.jpg", multipleImages: ["images/11.jpg"], colors: ["Startrail Blue", "Asteroid Black"], description: "Zeiss optics flagship.", highlights: ["Zeiss Camera", "Dimensity 9300"], seller: "Vivo Official", specifications: { Display: "6.78\" LTPO AMOLED", Processor: "Dimensity 9300", RAM: "16GB" }, detailedRating: { average: 4.7, count: 300, stars: {5:250, 4:30, 3:10, 2:5, 1:5}}, reviews:[], discount: 0, isNew: true, popularity: 87 },
            { id: 12, name: "Oppo Find X7 Ultra", brand: "Oppo", price: 1199, rating: 4.8, storageOptions: ["256GB", "512GB"], imageUrl: "images/12.jpg", multipleImages: ["images/12.jpg"], colors: ["Ocean Blue", "Sepia Brown"], description: "Dual Periscope cameras.", highlights: ["HyperTone Camera", "Snapdragon 8 Gen 3"], seller: "Oppo Store", specifications: { Display: "6.82\" LTPO AMOLED", Processor: "Snapdragon 8 Gen 3", RAM: "16GB" }, detailedRating: { average: 4.8, count: 450, stars: {5:380, 4:50, 3:10, 2:5, 1:5}}, reviews:[], discount: 0.05, isNew: true, popularity: 91 },
            { id: 13, name: "Motorola Edge 40 Pro", brand: "Motorola", price: 899, rating: 4.4, storageOptions: ["256GB", "512GB"], imageUrl: "images/13.jpg", multipleImages: ["images/13.jpg"], colors: ["Interstellar Black", "Lunar Blue"], description: "Curved display, fast charging.", highlights: ["165Hz Display", "Snapdragon 8 Gen 2"], seller: "Motorola Mobility", specifications: { Display: "6.67\" pOLED", Processor: "Snapdragon 8 Gen 2", RAM: "12GB" }, detailedRating: { average: 4.4, count: 550, stars: {5:350, 4:120, 3:40, 2:20, 1:20}}, reviews:[], discount: 0.1, isNew: false, popularity: 78 },
            { id: 14, name: "Motorola Razr+", brand: "Motorola", price: 999, rating: 4.5, storageOptions: ["256GB"], imageUrl: "images/14.jpg", multipleImages: ["images/14.jpg"], colors: ["Infinite Black", "Glacier Blue", "Viva Magenta"], description: "Large external display flip phone.", highlights: ["Large Cover Screen", "Compact Flip"], seller: "Motorola Mobility", specifications: { Display: "6.9\" Foldable pOLED + 3.6\" Cover", Processor: "Snapdragon 8+ Gen 1", RAM: "8GB" }, detailedRating: { average: 4.5, count: 400, stars: {5:300, 4:60, 3:20, 2:10, 1:10}}, reviews:[], discount: 0, isNew: false, popularity: 83 },
            { id: 15, name: "CMF Phone 1", brand: "CMF", price: 399, rating: 4.2, storageOptions: ["128GB"], imageUrl: "images/15.jpg", multipleImages: ["images/15.jpg"], colors: ["Orange", "Dark Grey"], description: "Affordable phone by Nothing sub-brand.", highlights: ["Value focused", "Clean design"], seller: "CMF Tech", specifications: { Display: "6.5\" LCD", Processor: "MediaTek Dimensity", RAM: "6GB" }, detailedRating: { average: 4.2, count: 200, stars: {5:100, 4:60, 3:20, 2:10, 1:10}}, reviews:[], discount: 0.05, isNew: true, popularity: 70 },
            { id: 16, name: "Realme GT 5 Pro", brand: "Realme", price: 699, rating: 4.6, storageOptions: ["256GB", "512GB", "1TB"], imageUrl: "images/16.jpg", multipleImages: ["images/16.jpg"], colors: ["Red Rock", "Bright Moon"], description: "Performance flagship killer.", highlights: ["Snapdragon 8 Gen 3", "IMX890 Camera"], seller: "Realme Official", specifications: { Display: "6.78\" AMOLED", Processor: "Snapdragon 8 Gen 3", RAM: "12GB/16GB" }, detailedRating: { average: 4.6, count: 600, stars: {5:420, 4:120, 3:30, 2:15, 1:15}}, reviews:[], discount: 0, isNew: true, popularity: 84 },
            { id: 17, name: "Huawei P60 Pro", brand: "Huawei", price: 1199, rating: 4.5, storageOptions: ["256GB", "512GB"], imageUrl: "images/17.jpg", multipleImages: ["images/17.jpg"], colors: ["Rococo Pearl", "Black"], description: "Variable aperture camera.", highlights: ["XMAGE Camera", "Kunlun Glass"], seller: "Huawei Store", specifications: { Display: "6.67\" LTPO OLED", Processor: "Snapdragon 8+ Gen 1 4G", RAM: "8GB/12GB" }, detailedRating: { average: 4.5, count: 350, stars: {5:250, 4:60, 3:20, 2:10, 1:10}}, reviews:[], discount: 0, isNew: false, popularity: 75 },
            { id: 18, name: "Poco X6 Pro", brand: "Poco", price: 349, rating: 4.4, storageOptions: ["256GB", "512GB"], imageUrl: "images/18.jpg", multipleImages: ["images/18.jpg"], colors: ["Yellow", "Black", "Grey"], description: "Speed-focused mid-ranger.", highlights: ["Dimensity 8300-Ultra", "120Hz AMOLED"], seller: "Poco Global", specifications: { Display: "6.67\" AMOLED", Processor: "Dimensity 8300-Ultra", RAM: "8GB/12GB" }, detailedRating: { average: 4.4, count: 950, stars: {5:600, 4:250, 3:50, 2:25, 1:25}}, reviews:[], discount: 0.1, isNew: true, popularity: 81 },
            { id: 19, name: "Infinix Note 40 Pro+", brand: "Infinix", price: 309, rating: 4.3, storageOptions: ["256GB"], imageUrl: "images/19.jpg", multipleImages: ["images/19.jpg"], colors: ["Vintage Green", "Obsidian Black"], description: "All-Round FastCharge 2.0.", highlights: ["100W Charging", "108MP Camera", "3D Curved AMOLED"], seller: "Infinix Mobility", specifications: { Display: "6.78\" AMOLED", Processor: "Dimensity 7020", RAM: "12GB" }, detailedRating: { average: 4.3, count: 480, stars: {5:280, 4:120, 3:40, 2:20, 1:20}}, reviews:[], discount: 0, isNew: true, popularity: 79 },
        ];

        const mockBrands = [ // Use "images/brand_logo.png" format. Adjust extensions if needed.
             { name: "Samsung", logo: "images/samsung_logo.jpg" },
             { name: "Apple", logo: "images/apple_logo.jpg" },
             { name: "Google", logo: "images/google_logo.jpg" },
             { name: "OnePlus", logo: "images/oneplus_logo.jpg" },
             { name: "Xiaomi", logo: "images/xiaomi_logo.jpg" },
             { name: "Nothing", logo: "images/nothing_logo.jpg" },
             { name: "Vivo", logo: "images/vivo_logo.jpg" },
             { name: "Oppo", logo: "images/oppo_logo.jpg" },
             { name: "Motorola", logo: "images/motorola_logo.jpg" },
             { name: "CMF", logo: "images/cmf_logo.jpg" },
             { name: "Realme", logo: "images/realme_logo.jpg" },
             { name: "Huawei", logo: "images/huawei_logo.jpg" },
             { name: "Poco", logo: "images/poco_logo.jpg" },
             { name: "Infinix", logo: "images/infinix_logo.jpg" },
        ];


        // --- Utility Functions (as before) ---
        const formatPrice = (price) => `$${price.toLocaleString()}`;
        const getInitialCart = () => { const s = localStorage.getItem('swipeKartCart'); return s ? JSON.parse(s) : []; };

        // --- React Components ---

        // Cart Icon, Search Bar, Filter Controls, Sort Dropdown (No changes needed here)
        const CartIcon = ({ itemCount, onClick }) => { /* ... as before ... */
            return ( <button onClick={onClick} className="relative p-2 rounded-full hover:bg-gray-200 transition duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-primary focus:ring-opacity-50"> <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6 text-gray-700" fill="none" viewBox="0 0 24 24" stroke="currentColor"> <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z" /> </svg> {itemCount > 0 && ( <span className="absolute top-0 right-0 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white transform translate-x-1/2 -translate-y-1/2 bg-primary rounded-full"> {itemCount} </span> )} </button> );
        };
        const SearchBar = ({ searchTerm, onSearchChange, onSearchSubmit }) => { /* ... as before ... */
             const handleKeyDown = (e) => { if (e.key === 'Enter') { onSearchSubmit(); } }; return ( <div className="relative flex-grow md:flex-grow-0 md:w-64 lg:w-80"> <input type="text" placeholder="Search phones..." value={searchTerm} onChange={(e) => onSearchChange(e.target.value)} onKeyDown={handleKeyDown} className="w-full px-4 py-2 pl-10 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition duration-300 ease-in-out" /> <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"> <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" /> </svg> </div> );
        };
        const FilterControls = ({ filters, onFilterChange, allBrands, maxPrice }) => { /* ... as before ... */
             const handleCheckboxChange=(e)=>{const{name,value,checked}=e.target;onFilterChange(name,checked?[...(filters[name]||[]),value]:(filters[name]||[]).filter(item=>item!==value));};const handleRangeChange=(e)=>{onFilterChange(e.target.name,parseInt(e.target.value,10));};const handleSingleSelectChange=(e)=>{onFilterChange(e.target.name,e.target.value);};return(<div className="space-y-6 p-4 bg-white rounded-lg shadow mb-6"><h3 className="text-lg font-semibold text-gray-800 border-b pb-2">Filters</h3><div><label className="block text-sm font-medium text-gray-700 mb-2">Brand</label><div className="space-y-1 max-h-32 overflow-y-auto pr-2">{allBrands.map(brand=>(<div key={brand} className="flex items-center"><input id={`brand-${brand}`} name="brands" type="checkbox" value={brand} checked={filters.brands?.includes(brand)||false} onChange={handleCheckboxChange} className="h-4 w-4 text-primary border-gray-300 rounded focus:ring-primary"/><label htmlFor={`brand-${brand}`} className="ml-2 block text-sm text-gray-900">{brand}</label></div>))}</div></div><div><label htmlFor="priceMax" className="block text-sm font-medium text-gray-700 mb-1">Max Price: {formatPrice(filters.priceMax??maxPrice)}</label><input type="range" id="priceMax" name="priceMax" min="0" max={maxPrice} value={filters.priceMax??maxPrice} onChange={handleRangeChange} step="50" className="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"/><div className="flex justify-between text-xs text-gray-500 mt-1"><span>{formatPrice(0)}</span><span>{formatPrice(maxPrice)}</span></div></div><div><label htmlFor="minRating" className="block text-sm font-medium text-gray-700 mb-2">Minimum Rating</label><select id="minRating" name="minRating" value={filters.minRating||'0'} onChange={handleSingleSelectChange} className="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary focus:border-primary sm:text-sm rounded-md"><option value="0">Any Rating</option><option value="4.5">4.5 Stars & Up</option><option value="4">4 Stars & Up</option><option value="3">3 Stars & Up</option></select></div><div><div className="flex items-center"><input id="discount" name="hasDiscount" type="checkbox" checked={filters.hasDiscount||false} onChange={(e)=>onFilterChange('hasDiscount',e.target.checked)} className="h-4 w-4 text-primary border-gray-300 rounded focus:ring-primary"/><label htmlFor="discount" className="ml-2 block text-sm text-gray-900">Show Only Discounted</label></div></div><div><label htmlFor="storage" className="block text-sm font-medium text-gray-700 mb-2">Storage</label><select id="storage" name="storage" value={filters.storage||''} onChange={handleSingleSelectChange} className="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary focus:border-primary sm:text-sm rounded-md"><option value="">Any Storage</option><option value="128GB">128GB</option><option value="256GB">256GB</option><option value="512GB">512GB</option><option value="1TB">1TB</option></select></div><button onClick={()=>onFilterChange('reset',true)} className="w-full mt-4 px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-gray-600 hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 transition duration-150 ease-in-out">Reset Filters</button></div>);
         };
        const SortDropdown = ({ sortOption, onSortChange }) => { /* ... as before ... */
             return ( <div className="relative"> <label htmlFor="sort" className="sr-only">Sort by</label> <select id="sort" value={sortOption} onChange={(e) => onSortChange(e.target.value)} className="appearance-none block w-full md:w-auto bg-white border border-gray-300 rounded-md shadow-sm pl-3 pr-10 py-2 text-left cursor-default focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary sm:text-sm transition duration-150 ease-in-out"> <option value="popularity">Popularity</option> <option value="price_asc">Price: Low to High</option> <option value="price_desc">Price: High to Low</option> <option value="rating_desc">Rating: High to Low</option> <option value="newest">Newest Arrivals</option> </select> <div className="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"> <svg className="fill-current h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"/></svg> </div> </div> );
        };

        // Header Component (No changes needed here)
        const Header = ({ searchTerm, onSearchChange, onSearchSubmit, onCartToggle, cartItemCount, onNavigateHome }) => { /* ... as before ... */
            return ( <header className="bg-white shadow-md sticky top-0 z-40"> <div className="container mx-auto px-4 py-3 flex flex-wrap items-center justify-between gap-4"> <h1 className="text-3xl font-extrabold cursor-pointer" onClick={onNavigateHome}> <span className="text-dark">Swipe</span><span className="text-primary">Kart</span> </h1> <div className="flex items-center space-x-4 order-last md:order-none flex-grow md:flex-grow-0 justify-center md:justify-start"> <SearchBar searchTerm={searchTerm} onSearchChange={onSearchChange} onSearchSubmit={onSearchSubmit} /> </div> <div className="flex items-center space-x-4"> <CartIcon itemCount={cartItemCount} onClick={onCartToggle} /> </div> </div> </header> );
         };

        // Product Card (Listing Page - No changes needed here, uses props)
        const ProductCard = ({ product, onAddToCart, onViewDetails }) => { /* ... as before ... */
             const { name, brand, price, rating, storageOptions, imageUrl, discount } = product; const originalPrice = discount > 0 ? price / (1 - discount) : price; return ( <div className="bg-white rounded-lg shadow-lg overflow-hidden transition-transform duration-300 ease-in-out hover:shadow-xl hover:-translate-y-1 flex flex-col"> <div className="relative p-4"> {discount > 0 && <span className="absolute top-2 left-2 bg-red-500 text-white text-xs font-semibold px-2 py-1 rounded">{Math.round(discount * 100)}% OFF</span>} <img src={imageUrl} alt={name} className="w-full h-48 object-contain cursor-pointer" onClick={() => onViewDetails(product.id)}/> </div> <div className="p-4 flex flex-col flex-grow"> <span className="text-sm text-gray-500 mb-1">{brand}</span> <h3 className="text-lg font-semibold text-gray-800 mb-2 truncate cursor-pointer hover:text-primary transition duration-150" onClick={() => onViewDetails(product.id)} title={name}>{name}</h3> <div className="flex items-center mb-2"> {[...Array(5)].map((_, i) => <svg key={i} xmlns="http://www.w3.org/2000/svg" className={`h-4 w-4 ${i < Math.round(rating) ? 'text-yellow-400' : 'text-gray-300'}`} viewBox="0 0 20 20" fill="currentColor"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" /></svg>)} <span className="text-xs text-gray-500 ml-1">({rating.toFixed(1)})</span> </div> <div className="mb-3"> <span className="text-xl font-bold text-primary">{formatPrice(price)}</span> {discount > 0 && <span className="text-sm text-gray-500 line-through ml-2">{formatPrice(originalPrice)}</span>} </div> <div className="text-xs text-gray-600 mb-4">Storage: {storageOptions.join(' / ')}</div> <button onClick={() => onAddToCart(product)} className="mt-auto w-full bg-primary text-white py-2 px-4 rounded-md font-semibold hover:bg-opacity-90 transition duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-primary focus:ring-opacity-50">Add to Cart</button> </div> </div> );
        };

        // Product List (Listing Page - No changes needed here)
        const ProductList = ({ products, onAddToCart, onViewDetails }) => { /* ... as before ... */
            if (products.length === 0) { return <p className="text-center text-gray-600 py-10 col-span-full">No products found matching your criteria.</p>; } return ( <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"> {products.map(product => <ProductCard key={product.id} product={product} onAddToCart={onAddToCart} onViewDetails={onViewDetails}/>)} </div> );
         };

        // Cart Item & Cart Drawer (No changes needed here, uses props)
        const CartItem = ({ item, onUpdateQuantity, onRemoveItem }) => { /* ... as before ... */
             const { product, quantity } = item; const { name, brand, price, imageUrl } = product; return ( <li className="flex items-center py-4 border-b border-gray-200 last:border-b-0"> <img src={imageUrl} alt={name} className="w-16 h-16 object-contain rounded mr-4 flex-shrink-0"/> <div className="flex-grow"> <h4 className="text-sm font-medium text-gray-800">{name}</h4> <p className="text-xs text-gray-500">{brand}</p> <p className="text-sm font-semibold text-primary mt-1">{formatPrice(price)}</p> </div> <div className="flex items-center space-x-2 mx-4"> <button onClick={() => onUpdateQuantity(product.id, quantity - 1)} className="p-1 rounded-full text-gray-600 hover:bg-gray-200 transition">-</button> <span className="text-sm font-medium w-4 text-center">{quantity}</span> <button onClick={() => onUpdateQuantity(product.id, quantity + 1)} className="p-1 rounded-full text-gray-600 hover:bg-gray-200 transition">+</button> </div> <button onClick={() => onRemoveItem(product.id)} className="text-gray-400 hover:text-red-500 transition p-1"> <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" /></svg> </button> </li> );
         };
        const CartDrawer = ({ isOpen, onClose, cartItems, onUpdateQuantity, onRemoveItem }) => { /* ... as before ... */
            const total = useMemo(() => cartItems.reduce((sum, item) => sum + item.product.price * item.quantity, 0), [cartItems]); return ( <> <div className={`cart-drawer-overlay ${isOpen ? 'open' : ''}`} onClick={onClose}></div> <div className={`cart-drawer ${isOpen ? 'open' : ''}`}> <div className="flex items-center justify-between p-4 border-b border-gray-200"> <h2 className="text-lg font-semibold text-gray-800">Shopping Cart</h2> <button onClick={onClose} className="text-gray-500 hover:text-gray-800 transition p-1 rounded-full hover:bg-gray-100"><svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" /></svg></button> </div> <div className="flex-grow overflow-y-auto px-4"> {cartItems.length === 0 ? <p className="text-center text-gray-500 py-10">Your cart is empty.</p> : <ul>{cartItems.map(item => <CartItem key={item.product.id} item={item} onUpdateQuantity={onUpdateQuantity} onRemoveItem={onRemoveItem} />)}</ul>} </div> {cartItems.length > 0 && <div className="p-4 border-t border-gray-200 bg-gray-50"> <div className="flex justify-between items-center mb-4"> <span className="text-lg font-semibold text-gray-800">Subtotal:</span> <span className="text-xl font-bold text-primary">{formatPrice(total)}</span> </div> <button className="w-full bg-primary text-white py-3 px-4 rounded-md font-semibold hover:bg-opacity-90 transition duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-primary focus:ring-opacity-50">Proceed to Checkout</button> </div>} </div> </> );
         };

        // Product Detail Page (No changes needed here, uses props)
        // Note: The 'multipleImages' feature will now show the same local image multiple times based on our data update,
        // unless you create specific thumbnail files (e.g., 1_thumb1.jpg, 1_thumb2.jpg) and update mockPhones accordingly.
        const ProductDetailPage = ({ product, onAddToCart, onGoBack, onSelectProduct }) => { /* ... as before ... */
            const [selectedImage, setSelectedImage] = useState(product.imageUrl); const [activeTab, setActiveTab] = useState('specs'); useEffect(() => { setSelectedImage(product.imageUrl); setActiveTab('specs'); window.scrollTo(0, 0); }, [product]); if (!product) return <div className="text-center py-10">Loading product details...</div>; const { name, brand, price, rating, storageOptions, multipleImages, colors, description, highlights, seller, specifications, detailedRating, reviews, discount, relevantProductIds } = product; const originalPrice = discount > 0 ? price / (1 - discount) : price; const ratingPercentage = detailedRating ? (detailedRating.average / 5) * 100 : 0; const relevantProducts = useMemo(() => { return mockPhones.filter(p => relevantProductIds?.includes(p.id)); }, [relevantProductIds]); return ( <div className="container mx-auto px-4 py-8 fade-in"> <button onClick={onGoBack} className="mb-6 inline-flex items-center text-gray-600 hover:text-primary transition duration-150"><svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor"><path fillRule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clipRule="evenodd" /></svg>Back to results</button> <div className="grid grid-cols-1 md:grid-cols-2 gap-8 lg:gap-12"> {/* Image Gallery */} <div className="flex flex-col items-center"> <div className="mb-4 w-full aspect-square bg-white rounded-lg shadow flex items-center justify-center overflow-hidden"> <img src={selectedImage} alt={name} className="max-h-full max-w-full object-contain p-4"/> </div> <div className="flex space-x-2 overflow-x-auto p-1"> {multipleImages?.map((imgUrl, index) => ( <button key={index} onClick={() => setSelectedImage(imgUrl)} className={`w-16 h-16 rounded border-2 p-0.5 flex-shrink-0 ${selectedImage === imgUrl ? 'border-primary' : 'border-transparent hover:border-gray-300'}`}> <img src={imgUrl} alt={`${name} thumbnail ${index + 1}`} className="w-full h-full object-contain"/> </button> ))} </div> </div> {/* Product Information */} <div> <span className="text-sm text-gray-500 mb-1 block">{brand}</span> <h1 className="text-3xl lg:text-4xl font-bold text-gray-900 mb-3">{name}</h1> {/* Rating */} {detailedRating && <div className="flex items-center mb-4"> <div className="flex items-center"> {[...Array(5)].map((_, i) => <svg key={i} xmlns="http://www.w3.org/2000/svg" className={`h-5 w-5 ${i < Math.round(detailedRating.average) ? 'text-yellow-400' : 'text-gray-300'}`} viewBox="0 0 20 20" fill="currentColor"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" /></svg>)} </div> <span className="text-sm text-gray-600 ml-2">{detailedRating.average.toFixed(1)} ({detailedRating.count} ratings)</span> </div>} {/* Price */} <div className="mb-5"> <span className="text-3xl font-bold text-primary">{formatPrice(price)}</span> {discount > 0 && <span className="text-lg text-gray-500 line-through ml-3">{formatPrice(originalPrice)}</span>} {discount > 0 && <span className="text-sm bg-red-100 text-red-600 font-semibold px-2 py-1 rounded ml-3">{Math.round(discount * 100)}% OFF</span>} </div> {/* Colors */} {colors && colors.length > 0 && <div className="mb-5"> <p className="text-sm font-medium text-gray-900 mb-2">Color: <span className="font-normal text-gray-600">{colors[0]} (Mock selection)</span></p> <div className="flex flex-wrap gap-2"> {colors.map(color => ( <button key={color} title={color} className="w-8 h-8 rounded-full border border-gray-300 focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-primary" style={{ backgroundColor: color.toLowerCase().includes('black')||color.toLowerCase().includes('graphite')?'#333':color.toLowerCase().includes('white')||color.toLowerCase().includes('porcelain')?'#f0f0f0':color.toLowerCase().includes('blue')?'#60a5fa':color.toLowerCase().includes('violet')?'#a78bfa':color.toLowerCase().includes('yellow')?'#facc15':color.toLowerCase().includes('gray')?'#9ca3af':color.toLowerCase().includes('green')?'#34d399':color.toLowerCase().includes('lime')?'#a3e635':'#e5e7eb' }}></button> ))} </div> </div>} {/* Storage/Variants */} {storageOptions && storageOptions.length > 0 && <div className="mb-6"> <p className="text-sm font-medium text-gray-900 mb-2">Storage:</p> <div className="flex flex-wrap gap-2"> {storageOptions.map(storage => ( <button key={storage} className="px-4 py-1.5 border border-gray-300 rounded-md text-sm text-gray-700 hover:border-primary hover:text-primary focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary transition duration-150">{storage}</button> ))} </div> </div>} <button onClick={() => onAddToCart(product)} className="w-full bg-primary text-white py-3 px-6 rounded-lg font-semibold text-lg hover:bg-opacity-90 transition duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary mb-6">Add to Cart</button> {/* Highlights */} {highlights && highlights.length > 0 && <div className="mb-6 bg-gray-50 p-4 rounded-lg"> <h3 className="text-md font-semibold text-gray-800 mb-2">Highlights</h3> <ul className="list-disc list-inside text-sm text-gray-600 space-y-1"> {highlights.map((item, index) => <li key={index}>{item}</li>)} </ul> </div>} {/* Seller */} {seller && <p className="text-sm text-gray-500 mb-6">Sold by: <span className="font-medium text-gray-700">{seller}</span></p>} </div> </div> {/* --- Detailed Info Tabs --- */} <div className="mt-12 border-t pt-8"> <div className="mb-6 border-b border-gray-200"> <nav className="-mb-px flex space-x-8" aria-label="Tabs"> <button onClick={() => setActiveTab('specs')} className={`whitespace-nowrap py-4 px-1 border-b-2 text-sm transition duration-150 ease-in-out ${activeTab === 'specs' ? 'tab-active' : 'tab-inactive hover:text-gray-700 hover:border-gray-300'}`}>Specifications</button> <button onClick={() => setActiveTab('reviews')} className={`whitespace-nowrap py-4 px-1 border-b-2 text-sm transition duration-150 ease-in-out ${activeTab === 'reviews' ? 'tab-active' : 'tab-inactive hover:text-gray-700 hover:border-gray-300'}`}>Ratings & Reviews ({reviews?.length ?? 0})</button> </nav> </div> <div> {/* Specs Tab */} {activeTab === 'specs' && specifications && <div className="space-y-4 fade-in"> <h3 className="text-xl font-semibold mb-4">Specifications</h3> {Object.entries(specifications).map(([key, value]) => ( <div key={key} className="grid grid-cols-3 gap-4 text-sm border-b pb-2 last:border-b-0"> <dt className="font-medium text-gray-600">{key}</dt> <dd className="text-gray-800 col-span-2">{value}</dd> </div> ))} </div>} {/* Reviews Tab */} {activeTab === 'reviews' && <div className="space-y-8 fade-in"> <h3 className="text-xl font-semibold mb-4">Ratings & Reviews</h3> {detailedRating && <div className="mb-6 p-4 bg-gray-50 rounded-lg"> <h4 className="font-semibold mb-2">Overall Rating</h4> <div className="flex items-center mb-2"> <span className="text-3xl font-bold mr-2">{detailedRating.average.toFixed(1)}</span> <div className="flex"> {[...Array(5)].map((_, i) => <svg key={i} xmlns="http://www.w3.org/2000/svg" className={`h-5 w-5 ${i < Math.round(detailedRating.average) ? 'text-yellow-400' : 'text-gray-300'}`} viewBox="0 0 20 20" fill="currentColor"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" /></svg>)} </div> <span className="text-sm text-gray-600 ml-2">based on {detailedRating.count} reviews</span> </div> <div className="space-y-1 text-xs"> {Object.entries(detailedRating.stars).sort((a, b) => b[0] - a[0]).map(([star, count]) => ( <div key={star} className="flex items-center"> <span className="w-10">{star} star</span> <div className="flex-1 bg-gray-200 rounded-full h-1.5 mx-2"> <div className="bg-yellow-400 h-1.5 rounded-full" style={{ width: `${(count / detailedRating.count) * 100}%` }}></div> </div> <span className="w-10 text-right">{count}</span> </div> ))} </div> </div>} {reviews && reviews.length > 0 ? reviews.map(review => ( <div key={review.id} className="border-b pb-6 last:border-b-0"> <div className="flex items-center mb-2"> <div className="flex mr-1"> {[...Array(5)].map((_, i) => <svg key={i} xmlns="http://www.w3.org/2000/svg" className={`h-4 w-4 ${i < review.rating ? 'text-yellow-400' : 'text-gray-300'}`} viewBox="0 0 20 20" fill="currentColor"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" /></svg>)} </div> <h5 className="font-semibold text-sm">{review.user}</h5> <span className="text-xs text-gray-500 ml-auto">{review.date}</span> </div> <p className="text-sm text-gray-700">{review.comment}</p> </div> )) : <p className="text-gray-500">No reviews yet for this product.</p>} </div>} </div> </div> {/* --- Relevant Products --- */} {relevantProducts.length > 0 && <div className="mt-16 border-t pt-8"> <h3 className="text-xl font-semibold mb-6">You Might Also Like</h3> <div className="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6"> {relevantProducts.map(relProd => ( <div key={relProd.id} className="bg-white rounded-lg shadow overflow-hidden transition-transform duration-300 ease-in-out hover:shadow-lg hover:-translate-y-0.5 flex flex-col cursor-pointer" onClick={() => onSelectProduct(relProd.id)}> <img src={relProd.imageUrl} alt={relProd.name} className="w-full h-36 object-contain p-2"/> <div className="p-3 flex flex-col flex-grow"> <span className="text-xs text-gray-500 mb-1">{relProd.brand}</span> <h4 className="text-sm font-semibold text-gray-800 mb-1 truncate">{relProd.name}</h4> <p className="text-md font-bold text-primary mt-auto">{formatPrice(relProd.price)}</p> </div> </div> ))} </div> </div>} </div> );
        };

        // Product Listing View (Container - No changes needed here)
        const ProductListing = ({ products, onAddToCart, onViewDetails, filters, onFilterChange, allBrands, maxPrice, sortOption, onSortChange, totalProductsCount }) => { /* ... as before ... */
            const [showFilters, setShowFilters] = useState(false); return ( <div className="container mx-auto px-4 py-6 flex-grow"> <div className="flex flex-col md:flex-row gap-8"> <aside className="w-full md:w-1/4 lg:w-1/5"> <button onClick={() => setShowFilters(!showFilters)} className="md:hidden w-full flex justify-between items-center px-4 py-2 mb-4 bg-white border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary"> <span>{showFilters ? 'Hide Filters' : 'Show Filters'}</span> <svg xmlns="http://www.w3.org/2000/svg" className={`h-5 w-5 transform transition-transform ${showFilters ? 'rotate-180' : ''}`} fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M19 9l-7 7-7-7" /></svg> </button> <div className={`${showFilters ? 'block' : 'hidden'} md:block`}> <FilterControls filters={filters} onFilterChange={onFilterChange} allBrands={allBrands} maxPrice={maxPrice} /> </div> </aside> <section className="w-full md:w-3/4 lg:w-4/5"> <div className="flex flex-col sm:flex-row justify-between items-center mb-6 gap-4"> <p className="text-sm text-gray-600">Showing {products.length} of {totalProductsCount} products</p> <SortDropdown sortOption={sortOption} onSortChange={onSortChange} /> </div> <ProductList products={products} onAddToCart={onAddToCart} onViewDetails={onViewDetails} /> </section> </div> </div> );
         };

        // Homepage Product Card (No changes needed here, uses props)
        const HomepageProductCard = ({ product, onViewDetails }) => {
            const { id, name, brand, price, imageUrl, discount } = product;
            const originalPrice = discount > 0 ? price / (1 - discount) : price;

            return (
                <div
                    onClick={() => onViewDetails(id)}
                    className="bg-white rounded-lg shadow overflow-hidden transition-all duration-300 ease-in-out hover:shadow-lg hover:-translate-y-1 cursor-pointer flex flex-col group"
                >
                    <div className="relative aspect-square w-full overflow-hidden p-4">
                         {discount > 0 && <span className="absolute top-2 left-2 z-10 bg-red-500 text-white text-xs font-semibold px-2 py-0.5 rounded">-{Math.round(discount * 100)}%</span>}
                         <img
                            src={imageUrl}
                            alt={name}
                            // loading="lazy" // Add lazy loading for homepage images
                            className="w-full h-full object-contain transition-transform duration-300 group-hover:scale-105"
                        />
                    </div>
                    <div className="p-3 text-center">
                        <span className="text-xs text-gray-500 mb-0.5 block">{brand}</span>
                        <h4 className="text-sm font-semibold text-gray-800 mb-1 truncate" title={name}>{name}</h4>
                        <p className="text-md font-bold text-primary">
                            {formatPrice(price)}
                            {discount > 0 && <span className="text-xs text-gray-400 line-through ml-1">{formatPrice(originalPrice)}</span>}
                         </p>
                    </div>
                </div>
            );
        };

        // Homepage Component (No changes needed here, uses props)
        const Homepage = ({ allProducts, brands, onViewDetails, onBrandSelect, onSearchSubmit }) => {
             const [localSearch, setLocalSearch] = useState('');

             const handleSearch = () => { if(localSearch.trim()) { onSearchSubmit(localSearch); } }

             const latestProducts = useMemo(() => {
                 return [...allProducts]
                     .filter(p => p.isNew)
                     .sort((a, b) => b.popularity - a.popularity)
                     .slice(0, 8);
             }, [allProducts]);

             const discountedProducts = useMemo(() => {
                 return [...allProducts]
                     .filter(p => p.discount > 0)
                     .sort((a, b) => b.discount - a.discount)
                     .slice(0, 8);
             }, [allProducts]);

             return (
                <div className="container mx-auto px-4 py-8 fade-in space-y-16">
                    {/* Top Section: Welcome & Search */}
                    <section className="text-center">
                        <h2 className="text-4xl font-extrabold mb-4 text-dark">Find Your Next Phone</h2>
                        <p className="text-lg text-gray-600 mb-8 max-w-2xl mx-auto">Explore the latest smartphones from top brands, find great deals, and get exactly what you need.</p>
                        <div className="max-w-2xl mx-auto flex shadow-md rounded-full">
                            <input type="text" placeholder="Search SwipeKart..." value={localSearch} onChange={(e) => setLocalSearch(e.target.value)} onKeyDown={(e) => e.key === 'Enter' && handleSearch()} className="flex-grow px-6 py-3 border-r border-gray-200 rounded-l-full focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-md"/>
                            <button onClick={handleSearch} className="bg-primary text-white px-6 py-3 rounded-r-full font-semibold hover:bg-opacity-90 transition duration-300 ease-in-out text-md flex items-center">
                                <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5 md:mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor"> <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" /> </svg>
                                <span className="hidden md:inline">Search</span>
                            </button>
                        </div>
                    </section>

                    {/* Latest Arrivals Section */}
                    {latestProducts.length > 0 && (
                        <section>
                            <h3 className="text-2xl font-bold text-dark mb-6 text-center md:text-left">Latest Arrivals</h3>
                            <div className="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4 md:gap-6">
                                {latestProducts.map(product => (
                                    <HomepageProductCard key={product.id} product={product} onViewDetails={onViewDetails} />
                                ))}
                            </div>
                        </section>
                    )}

                    {/* Shop by Brand Section */}
                    {brands.length > 0 && (
                        <section>
                            <h3 className="text-2xl font-bold text-dark mb-6 text-center md:text-left">Shop by Brand</h3>
                            <div className="grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-7 gap-4 md:gap-6">
                                {brands.map(brand => (
                                    <div
                                        key={brand.name}
                                        onClick={() => onBrandSelect(brand.name)}
                                        className="bg-white p-4 rounded-lg shadow hover:shadow-md transition-shadow duration-300 ease-in-out cursor-pointer flex flex-col items-center justify-center aspect-square"
                                    >
                                        {/* Use the local logo path */}
                                        <img src={brand.logo} alt={brand.name} className="max-h-12 object-contain mb-2"/>
                                        <span className="text-center text-xs sm:text-sm font-medium text-gray-700">{brand.name}</span>
                                    </div>
                                ))}
                            </div>
                        </section>
                    )}

                     {/* Hot Discounts Section */}
                     {discountedProducts.length > 0 && (
                        <section>
                            <h3 className="text-2xl font-bold text-dark mb-6 text-center md:text-left">Hot Discounts</h3>
                            <div className="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4 md:gap-6">
                                {discountedProducts.map(product => (
                                    <HomepageProductCard key={product.id} product={product} onViewDetails={onViewDetails} />
                                ))}
                            </div>
                        </section>
                    )}
                </div>
            );
        };


        // --- Main App Component (Handles Views and State - No Logic Changes Needed) ---
        function App() {
            const [currentView, setCurrentView] = useState('home'); // 'home', 'listing', 'detail'
            const [selectedProductId, setSelectedProductId] = useState(null);
            // Use the updated mockPhones with local paths
            const allProducts = useMemo(() => mockPhones, []);
            const [filteredProducts, setFilteredProducts] = useState(allProducts);
            const [cartItems, setCartItems] = useState(getInitialCart);
            const [isCartOpen, setIsCartOpen] = useState(false);
            const [searchTerm, setSearchTerm] = useState('');
            const [filters, setFilters] = useState({});
            const [sortOption, setSortOption] = useState('popularity');

            // Derived values
            const uniqueBrands = useMemo(() => [...new Set(allProducts.map(p => p.brand))].sort(), [allProducts]);
            const maxPrice = useMemo(() => Math.max(...allProducts.map(p => p.price)), [allProducts]);
            const cartItemCount = useMemo(() => cartItems.reduce((count, item) => count + item.quantity, 0), [cartItems]);
            const selectedProduct = useMemo(() => {
                 if (currentView !== 'detail' || selectedProductId === null) return null;
                 return allProducts.find(p => p.id === selectedProductId);
             }, [currentView, selectedProductId, allProducts]);

            // --- Effects ---
            useEffect(() => { localStorage.setItem('swipeKartCart', JSON.stringify(cartItems)); }, [cartItems]);
            useEffect(() => { // Filter/Sort Logic (runs when dependencies change)
                let result = [...allProducts];
                if (searchTerm) { const ls = searchTerm.toLowerCase(); result = result.filter(p => p.name.toLowerCase().includes(ls) || p.brand.toLowerCase().includes(ls)); }
                if (filters.brands && filters.brands.length > 0) { result = result.filter(p => filters.brands.includes(p.brand)); }
                if (filters.priceMax != null) { result = result.filter(p => p.price <= filters.priceMax); }
                if (filters.minRating && filters.minRating > 0) { result = result.filter(p => p.rating >= filters.minRating); }
                if (filters.storage) { result = result.filter(p => p.storageOptions.includes(filters.storage)); }
                if (filters.hasDiscount) { result = result.filter(p => p.discount > 0); }
                switch (sortOption) {
                    case 'price_asc': result.sort((a, b) => a.price - b.price); break;
                    case 'price_desc': result.sort((a, b) => b.price - a.price); break;
                    case 'rating_desc': result.sort((a, b) => b.rating - a.rating); break;
                    case 'newest': result.sort((a, b) => (b.isNew ? 1 : 0) - (a.isNew ? 1 : 0) || b.id - a.id); break;
                    case 'popularity': default: result.sort((a, b) => b.popularity - a.popularity); break;
                }
                setFilteredProducts(result);
            }, [searchTerm, filters, sortOption, allProducts]);

            // --- Handlers (No changes needed here) ---
            const handleAddToCart = useCallback((product) => { /* ... */
                setCartItems(prevItems => { const e = prevItems.find(i=>i.product.id === product.id); return e ? prevItems.map(i => i.product.id === product.id ? { ...i, quantity: i.quantity + 1 } : i) : [...prevItems, { product, quantity: 1 }]; });
            }, []);
            const handleUpdateQuantity = useCallback((productId, quantity) => { /* ... */
                 setCartItems(prevItems => { if (quantity <= 0) return prevItems.filter(i => i.product.id !== productId); return prevItems.map(i => i.product.id === productId ? { ...i, quantity } : i); });
            }, []);
            const handleRemoveItem = useCallback((productId) => { /* ... */
                 setCartItems(prevItems => prevItems.filter(i => i.product.id !== productId));
             }, []);
            const handleFilterChange = useCallback((filterName, value) => { /* ... */
                 if (filterName === 'reset') { setFilters({}); } else { setFilters(prev => ({ ...prev, [filterName]: value })); } setCurrentView('listing');
            }, []);
             const handleSortChange = useCallback((newSortOption) => { /* ... */
                 setSortOption(newSortOption); setCurrentView('listing');
            }, []);
             const handleSearchChange = useCallback((value) => { setSearchTerm(value); }, []);
            const handleSearchSubmit = useCallback((term = searchTerm) => { /* ... */
                 setSearchTerm(term); setCurrentView('listing');
             }, [searchTerm]);

             // --- Navigation Handlers (No changes needed here) ---
             const navigateToHome = useCallback(() => { setCurrentView('home'); setSelectedProductId(null); }, []);
             const navigateToListing = useCallback(() => { setCurrentView('listing'); setSelectedProductId(null); }, []);
             const navigateToDetail = useCallback((productId) => { setSelectedProductId(productId); setCurrentView('detail'); }, []);

            // --- Render Logic ---
             const renderCurrentView = () => {
                switch (currentView) {
                    case 'detail':
                         return selectedProduct ? <ProductDetailPage product={selectedProduct} onAddToCart={handleAddToCart} onGoBack={navigateToListing} onSelectProduct={navigateToDetail} /> : <div className="text-center p-10">Product not found. <button onClick={navigateToListing} className="text-primary hover:underline">Go back</button></div>;
                    case 'listing':
                        return <ProductListing products={filteredProducts} onAddToCart={handleAddToCart} onViewDetails={navigateToDetail} filters={filters} onFilterChange={handleFilterChange} allBrands={uniqueBrands} maxPrice={maxPrice} sortOption={sortOption} onSortChange={handleSortChange} totalProductsCount={allProducts.length} />;
                    case 'home':
                    default:
                        return <Homepage
                                    allProducts={allProducts} // Already uses local paths
                                    brands={mockBrands} // Use the updated mockBrands with local paths
                                    onViewDetails={navigateToDetail}
                                    onBrandSelect={(brandName) => { handleFilterChange('brands', [brandName]); }}
                                    onSearchSubmit={handleSearchSubmit}
                                />;
                }
             };

            return (
                <div className="flex flex-col min-h-screen">
                    <Header searchTerm={searchTerm} onSearchChange={handleSearchChange} onSearchSubmit={handleSearchSubmit} onCartToggle={() => setIsCartOpen(!isCartOpen)} cartItemCount={cartItemCount} onNavigateHome={navigateToHome} />
                    <main className="flex-grow"> {renderCurrentView()} </main>
                    <footer className="bg-gray-800 text-white text-center p-4 mt-auto"> © {new Date().getFullYear()} SwipeKart. All rights reserved. </footer>
                    <CartDrawer isOpen={isCartOpen} onClose={() => setIsCartOpen(false)} cartItems={cartItems} onUpdateQuantity={handleUpdateQuantity} onRemoveItem={handleRemoveItem} />
                </div>
            );
        }

        // Render the App
        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>